{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport _ from 'lodash';\nimport React, { useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { useDetectDevice } from \"../../toolkits\";\nimport { useDeviceOrientation } from \"../../useDeviceOrientation\";\nimport CInput from \"../TextInput\";\nimport { styles } from \"./styles\";\nvar isTablet = useDetectDevice.isTablet;\nvar ic_down = require(\"../../assets/down.png\");\nvar statusBarHeight = StatusBar.currentHeight || 0;\nvar MultiSelectComponent = React.forwardRef(function (props, currentRef) {\n  var orientation = useDeviceOrientation();\n  var testID = props.testID,\n    itemTestIDField = props.itemTestIDField,\n    onChange = props.onChange,\n    _props$data = props.data,\n    data = _props$data === void 0 ? [] : _props$data,\n    value = props.value,\n    _props$style = props.style,\n    style = _props$style === void 0 ? {} : _props$style,\n    labelField = props.labelField,\n    valueField = props.valueField,\n    searchField = props.searchField,\n    selectedStyle = props.selectedStyle,\n    selectedTextStyle = props.selectedTextStyle,\n    itemContainerStyle = props.itemContainerStyle,\n    itemTextStyle = props.itemTextStyle,\n    iconStyle = props.iconStyle,\n    _props$activeColor = props.activeColor,\n    activeColor = _props$activeColor === void 0 ? '#F6F7F8' : _props$activeColor,\n    containerStyle = props.containerStyle,\n    fontFamily = props.fontFamily,\n    placeholderStyle = props.placeholderStyle,\n    _props$iconColor = props.iconColor,\n    iconColor = _props$iconColor === void 0 ? 'gray' : _props$iconColor,\n    inputSearchStyle = props.inputSearchStyle,\n    searchPlaceholder = props.searchPlaceholder,\n    _props$placeholder = props.placeholder,\n    placeholder = _props$placeholder === void 0 ? 'Select item' : _props$placeholder,\n    _props$search = props.search,\n    search = _props$search === void 0 ? false : _props$search,\n    _props$maxHeight = props.maxHeight,\n    maxHeight = _props$maxHeight === void 0 ? 340 : _props$maxHeight,\n    _props$minHeight = props.minHeight,\n    minHeight = _props$minHeight === void 0 ? 0 : _props$minHeight,\n    maxSelect = props.maxSelect,\n    _props$disable = props.disable,\n    disable = _props$disable === void 0 ? false : _props$disable,\n    _props$keyboardAvoidi = props.keyboardAvoiding,\n    keyboardAvoiding = _props$keyboardAvoidi === void 0 ? true : _props$keyboardAvoidi,\n    _props$inside = props.inside,\n    inside = _props$inside === void 0 ? false : _props$inside,\n    _props$inverted = props.inverted,\n    inverted = _props$inverted === void 0 ? true : _props$inverted,\n    renderItem = props.renderItem,\n    renderLeftIcon = props.renderLeftIcon,\n    renderRightIcon = props.renderRightIcon,\n    renderSelectedItem = props.renderSelectedItem,\n    renderInputSearch = props.renderInputSearch,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    _props$showsVerticalS = props.showsVerticalScrollIndicator,\n    showsVerticalScrollIndicator = _props$showsVerticalS === void 0 ? true : _props$showsVerticalS,\n    _props$dropdownPositi = props.dropdownPosition,\n    dropdownPosition = _props$dropdownPositi === void 0 ? 'auto' : _props$dropdownPositi,\n    flatListProps = props.flatListProps,\n    _props$alwaysRenderSe = props.alwaysRenderSelectedItem,\n    alwaysRenderSelectedItem = _props$alwaysRenderSe === void 0 ? false : _props$alwaysRenderSe,\n    searchQuery = props.searchQuery,\n    backgroundColor = props.backgroundColor,\n    _onChangeText = props.onChangeText,\n    confirmSelectItem = props.confirmSelectItem,\n    confirmUnSelectItem = props.confirmUnSelectItem,\n    onConfirmSelectItem = props.onConfirmSelectItem,\n    accessibilityLabel = props.accessibilityLabel,\n    itemAccessibilityLabelField = props.itemAccessibilityLabelField,\n    _props$visibleSelecte = props.visibleSelectedItem,\n    visibleSelectedItem = _props$visibleSelecte === void 0 ? true : _props$visibleSelecte;\n  var ref = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentValue = _useState4[0],\n    setCurrentValue = _useState4[1];\n  var _useState5 = useState(data),\n    _useState6 = _slicedToArray(_useState5, 2),\n    listData = _useState6[0],\n    setListData = _useState6[1];\n  var _useState7 = useState(Math.random()),\n    _useState8 = _slicedToArray(_useState7, 2),\n    setKey = _useState8[1];\n  var _useState9 = useState(),\n    _useState10 = _slicedToArray(_useState9, 2),\n    position = _useState10[0],\n    setPosition = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    keyboardHeight = _useState12[0],\n    setKeyboardHeight = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    searchText = _useState14[0],\n    setSearchText = _useState14[1];\n  var _Dimensions$get = Dimensions.get('window'),\n    W = _Dimensions$get.width,\n    H = _Dimensions$get.height;\n  var styleContainerVertical = useMemo(function () {\n    return {\n      backgroundColor: 'rgba(0,0,0,0.1)',\n      alignItems: 'center'\n    };\n  }, []);\n  var styleHorizontal = useMemo(function () {\n    return {\n      marginBottom: 20,\n      width: W / 2,\n      alignSelf: 'center'\n    };\n  }, [W]);\n  useImperativeHandle(currentRef, function () {\n    return {\n      open: eventOpen,\n      close: eventClose\n    };\n  });\n  useEffect(function () {\n    setListData(_toConsumableArray(data));\n    if (searchText) {\n      onSearch(searchText);\n    }\n  }, [data, searchText]);\n  var eventOpen = function eventOpen() {\n    if (!disable) {\n      setVisible(true);\n      if (onFocus) {\n        onFocus();\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n    }\n  };\n  var eventClose = function eventClose() {\n    if (!disable) {\n      setVisible(false);\n      if (onBlur) {\n        onBlur();\n      }\n    }\n  };\n  var font = useCallback(function () {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily\n      };\n    } else {\n      return {};\n    }\n  }, [fontFamily]);\n  var getValue = useCallback(function () {\n    setCurrentValue(value ? _toConsumableArray(value) : []);\n  }, [value]);\n  var _measure = useCallback(function () {\n    if (ref && ref !== null && ref !== void 0 && ref.current) {\n      ref.current.measureInWindow(function (pageX, pageY, width, height) {\n        var isFull = orientation === 'LANDSCAPE' && !isTablet;\n        var top = isFull ? 20 : height + pageY + 2;\n        var bottom = H - top + height;\n        var left = I18nManager.isRTL ? W - width - pageX : pageX;\n        setPosition({\n          isFull: isFull,\n          width: Math.floor(width),\n          top: Math.floor(top + statusBarHeight),\n          bottom: Math.floor(bottom - statusBarHeight),\n          left: Math.floor(left),\n          height: Math.floor(height)\n        });\n      });\n    }\n  }, [H, W, orientation]);\n  var onKeyboardDidShow = useCallback(function (e) {\n    _measure();\n    setKeyboardHeight(e.endCoordinates.height);\n  }, [_measure]);\n  var onKeyboardDidHide = useCallback(function () {\n    setKeyboardHeight(0);\n    _measure();\n  }, [_measure]);\n  useEffect(function () {\n    var susbcriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', onKeyboardDidShow);\n    var susbcriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', onKeyboardDidHide);\n    return function () {\n      if (typeof (susbcriptionKeyboardDidShow === null || susbcriptionKeyboardDidShow === void 0 ? void 0 : susbcriptionKeyboardDidShow.remove) === 'function') {\n        susbcriptionKeyboardDidShow.remove();\n      }\n      if (typeof (susbcriptionKeyboardDidHide === null || susbcriptionKeyboardDidHide === void 0 ? void 0 : susbcriptionKeyboardDidHide.remove) === 'function') {\n        susbcriptionKeyboardDidHide.remove();\n      }\n    };\n  }, [onKeyboardDidHide, onKeyboardDidShow]);\n  useEffect(function () {\n    getValue();\n  }, [getValue, value]);\n  var showOrClose = useCallback(function () {\n    if (!disable) {\n      if (keyboardHeight > 0 && visible) {\n        return Keyboard.dismiss();\n      }\n      _measure();\n      setVisible(!visible);\n      setListData(data);\n      if (!visible) {\n        if (onFocus) {\n          onFocus();\n        }\n      } else {\n        if (onBlur) {\n          onBlur();\n        }\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n    }\n  }, [disable, keyboardHeight, visible, _measure, data, searchText, onFocus, onBlur]);\n  var onSearch = useCallback(function (text) {\n    if (text.length > 0) {\n      var defaultFilterFunction = function defaultFilterFunction(e) {\n        var _$get;\n        var item = (_$get = _.get(e, searchField || labelField)) === null || _$get === void 0 ? void 0 : _$get.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        var key = text.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        return item.indexOf(key) >= 0;\n      };\n      var propSearchFunction = function propSearchFunction(e) {\n        var labelText = _.get(e, searchField || labelField);\n        return searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery(text, labelText);\n      };\n      var dataSearch = data.filter(searchQuery ? propSearchFunction : defaultFilterFunction);\n      setListData(dataSearch);\n    } else {\n      setListData(data);\n    }\n  }, [data, searchField, labelField, searchQuery]);\n  var onSelect = useCallback(function (item) {\n    var newCurrentValue = _toConsumableArray(currentValue);\n    var index = newCurrentValue.findIndex(function (e) {\n      return e === _.get(item, valueField);\n    });\n    if (index > -1) {\n      newCurrentValue.splice(index, 1);\n    } else {\n      if (maxSelect) {\n        if (newCurrentValue.length < maxSelect) {\n          newCurrentValue.push(_.get(item, valueField));\n        }\n      } else {\n        newCurrentValue.push(_.get(item, valueField));\n      }\n    }\n    if (onConfirmSelectItem) {\n      if (index > -1) {\n        if (confirmUnSelectItem) {\n          onConfirmSelectItem(newCurrentValue);\n        } else {\n          onChange(newCurrentValue);\n        }\n      } else {\n        if (confirmSelectItem) {\n          onConfirmSelectItem(newCurrentValue);\n        } else {\n          onChange(newCurrentValue);\n        }\n      }\n    } else {\n      onChange(newCurrentValue);\n    }\n    setKey(Math.random());\n  }, [confirmSelectItem, confirmUnSelectItem, currentValue, maxSelect, onChange, onConfirmSelectItem, valueField]);\n  var _renderDropdown = function _renderDropdown() {\n    return React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, React.createElement(View, {\n      style: styles.dropdown\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(visible), React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, placeholderStyle, font()])\n    }, placeholder), renderRightIcon ? renderRightIcon(visible) : React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  var checkSelected = useCallback(function (item) {\n    var index = currentValue.findIndex(function (e) {\n      return e === _.get(item, valueField);\n    });\n    return index > -1;\n  }, [currentValue, valueField]);\n  var _renderItem = useCallback(function (_ref) {\n    var item = _ref.item,\n      index = _ref.index;\n    var selected = checkSelected(item);\n    _.assign(item, {\n      _index: index\n    });\n    return React.createElement(TouchableHighlight, {\n      key: index.toString(),\n      testID: _.get(item, itemTestIDField || labelField),\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: _.get(item, itemAccessibilityLabelField || labelField),\n      underlayColor: activeColor,\n      onPress: function onPress() {\n        return onSelect(item);\n      }\n    }, React.createElement(View, {\n      style: StyleSheet.flatten([itemContainerStyle, selected && _objectSpread({\n        backgroundColor: activeColor\n      }, styles.wrapItem)])\n    }, renderItem ? renderItem(item, selected) : React.createElement(View, {\n      style: styles.item\n    }, React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, itemTextStyle, font()])\n    }, _.get(item, labelField)))));\n  }, [accessibilityLabel, activeColor, checkSelected, font, itemAccessibilityLabelField, itemContainerStyle, itemTestIDField, itemTextStyle, labelField, onSelect, renderItem]);\n  var renderSearch = useCallback(function () {\n    if (search) {\n      if (renderInputSearch) {\n        return renderInputSearch(function (text) {\n          if (_onChangeText) {\n            setSearchText(text);\n            _onChangeText(text);\n          }\n          onSearch(text);\n        });\n      } else {\n        return React.createElement(CInput, {\n          testID: testID + ' input',\n          accessibilityLabel: accessibilityLabel + ' input',\n          style: [styles.input, inputSearchStyle],\n          inputStyle: [inputSearchStyle, font()],\n          autoCorrect: false,\n          placeholder: searchPlaceholder,\n          onChangeText: function onChangeText(e) {\n            if (_onChangeText) {\n              setSearchText(e);\n              _onChangeText(e);\n            }\n            onSearch(e);\n          },\n          placeholderTextColor: \"gray\",\n          iconStyle: [{\n            tintColor: iconColor\n          }, iconStyle]\n        });\n      }\n    }\n    return null;\n  }, [accessibilityLabel, font, iconColor, iconStyle, inputSearchStyle, _onChangeText, onSearch, renderInputSearch, search, searchPlaceholder, testID]);\n  var _renderList = useCallback(function (isTopPosition) {\n    var isInverted = !inverted ? false : isTopPosition;\n    var _renderListHelper = function _renderListHelper() {\n      return React.createElement(FlatList, _extends({\n        testID: testID + ' flatlist',\n        accessibilityLabel: accessibilityLabel + ' flatlist'\n      }, flatListProps, {\n        keyboardShouldPersistTaps: \"handled\",\n        data: listData,\n        inverted: isTopPosition ? inverted : false,\n        renderItem: _renderItem,\n        keyExtractor: function keyExtractor(_item, index) {\n          return index.toString();\n        },\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n      }));\n    };\n    return React.createElement(TouchableWithoutFeedback, null, React.createElement(View, {\n      style: styles.flexShrink\n    }, isInverted && _renderListHelper(), renderSearch(), !isInverted && _renderListHelper()));\n  }, [_renderItem, accessibilityLabel, flatListProps, listData, inverted, renderSearch, showsVerticalScrollIndicator, testID]);\n  var _renderModal = useCallback(function () {\n    if (visible && position) {\n      var isFull = position.isFull,\n        width = position.width,\n        height = position.height,\n        top = position.top,\n        bottom = position.bottom,\n        left = position.left;\n      var onAutoPosition = function onAutoPosition() {\n        if (keyboardHeight > 0) {\n          return bottom < keyboardHeight + height;\n        }\n        return bottom < (search ? 150 : 100);\n      };\n      if (width && top && bottom) {\n        var styleVertical = {\n          left: left,\n          maxHeight: maxHeight,\n          minHeight: minHeight\n        };\n        var isTopPosition = dropdownPosition === 'auto' ? onAutoPosition() : dropdownPosition === 'top';\n        var keyboardStyle = {};\n        var extendHeight = !isTopPosition ? top : bottom;\n        if (keyboardAvoiding && keyboardHeight > 0 && isTopPosition && dropdownPosition === 'auto') {\n          extendHeight = keyboardHeight;\n        }\n        return React.createElement(Modal, {\n          transparent: true,\n          statusBarTranslucent: true,\n          visible: visible,\n          supportedOrientations: ['landscape', 'portrait'],\n          onRequestClose: showOrClose\n        }, React.createElement(TouchableWithoutFeedback, {\n          onPress: showOrClose\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, isFull && styleContainerVertical, backgroundColor && {\n            backgroundColor: backgroundColor\n          }, keyboardStyle])\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, {\n            width: width\n          }, !isTopPosition ? {\n            paddingTop: extendHeight\n          } : {\n            justifyContent: 'flex-end',\n            paddingBottom: extendHeight\n          }])\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.container, containerStyle, isFull ? styleHorizontal : styleVertical])\n        }, _renderList(isTopPosition))))));\n      }\n      return null;\n    }\n    return null;\n  }, [visible, search, position, keyboardHeight, maxHeight, minHeight, dropdownPosition, keyboardAvoiding, showOrClose, styleContainerVertical, backgroundColor, containerStyle, styleHorizontal, _renderList]);\n  var unSelect = function unSelect(item) {\n    if (!disable) {\n      onSelect(item);\n    }\n  };\n  var _renderItemSelected = function _renderItemSelected(inside) {\n    var list = data.filter(function (e) {\n      var check = value === null || value === void 0 ? void 0 : value.indexOf(_.get(e, valueField));\n      if (check !== -1) {\n        return e;\n      }\n    });\n    return React.createElement(View, {\n      style: StyleSheet.flatten([styles.rowSelectedItem, inside && styles.flex1])\n    }, list.map(function (e) {\n      if (renderSelectedItem) {\n        return React.createElement(TouchableWithoutFeedback, {\n          testID: _.get(e, itemTestIDField || labelField),\n          accessible: !!accessibilityLabel,\n          accessibilityLabel: _.get(e, itemAccessibilityLabelField || labelField),\n          key: _.get(e, labelField),\n          onPress: function onPress() {\n            return unSelect(e);\n          }\n        }, renderSelectedItem(e, function () {\n          unSelect(e);\n        }));\n      } else {\n        return React.createElement(TouchableWithoutFeedback, {\n          testID: _.get(e, itemTestIDField || labelField),\n          accessible: !!accessibilityLabel,\n          accessibilityLabel: _.get(e, itemAccessibilityLabelField || labelField),\n          key: _.get(e, labelField),\n          onPress: function onPress() {\n            return unSelect(e);\n          }\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.selectedItem, selectedStyle])\n        }, React.createElement(Text, {\n          style: StyleSheet.flatten([styles.selectedTextLeftItem, selectedTextStyle, font()])\n        }, _.get(e, labelField)), React.createElement(Text, {\n          style: StyleSheet.flatten([styles.selectedTextItem, selectedTextStyle])\n        }, \"\\u24E7\")));\n      }\n    }));\n  };\n  var _renderInside = function _renderInside() {\n    return React.createElement(View, {\n      style: StyleSheet.flatten([styles.mainWrap, style]),\n      ref: ref,\n      onLayout: _measure\n    }, _renderDropdownInside(), _renderModal());\n  };\n  var _renderDropdownInside = function _renderDropdownInside() {\n    return React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, React.createElement(View, {\n      style: styles.dropdownInside\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(), value && (value === null || value === void 0 ? void 0 : value.length) > 0 ? _renderItemSelected(true) : React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, placeholderStyle, font()])\n    }, placeholder), renderRightIcon ? renderRightIcon() : React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  if (inside) {\n    return _renderInside();\n  }\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: StyleSheet.flatten([styles.mainWrap, style]),\n    ref: ref,\n    onLayout: _measure\n  }, _renderDropdown(), _renderModal()), (!visible || alwaysRenderSelectedItem) && visibleSelectedItem && _renderItemSelected(false));\n});\nexport default MultiSelectComponent;","map":{"version":3,"sources":["components/MultiSelect/index.tsx"],"names":["_","React","useCallback","useEffect","useImperativeHandle","useMemo","useRef","useState","useDetectDevice","useDeviceOrientation","CInput","styles","isTablet","ic_down","require","statusBarHeight","StatusBar","currentHeight","MultiSelectComponent","forwardRef","props","currentRef","orientation","testID","itemTestIDField","onChange","data","value","style","labelField","valueField","searchField","selectedStyle","selectedTextStyle","itemContainerStyle","itemTextStyle","iconStyle","activeColor","containerStyle","fontFamily","placeholderStyle","iconColor","inputSearchStyle","searchPlaceholder","placeholder","search","maxHeight","minHeight","maxSelect","disable","keyboardAvoiding","inside","inverted","renderItem","renderLeftIcon","renderRightIcon","renderSelectedItem","renderInputSearch","onFocus","onBlur","showsVerticalScrollIndicator","dropdownPosition","flatListProps","alwaysRenderSelectedItem","searchQuery","backgroundColor","onChangeText","confirmSelectItem","confirmUnSelectItem","onConfirmSelectItem","accessibilityLabel","itemAccessibilityLabelField","visibleSelectedItem","ref","visible","setVisible","currentValue","setCurrentValue","listData","setListData","setKey","Math","random","position","setPosition","keyboardHeight","setKeyboardHeight","searchText","setSearchText","width","W","height","H","Dimensions","get","styleContainerVertical","alignItems","styleHorizontal","marginBottom","alignSelf","open","eventOpen","close","eventClose","onSearch","length","font","getValue","_measure","current","measureInWindow","pageX","pageY","isFull","top","bottom","left","I18nManager","isRTL","floor","onKeyboardDidShow","e","endCoordinates","onKeyboardDidHide","susbcriptionKeyboardDidShow","Keyboard","addListener","susbcriptionKeyboardDidHide","remove","showOrClose","dismiss","text","defaultFilterFunction","item","toLowerCase","replace","normalize","key","indexOf","propSearchFunction","labelText","dataSearch","filter","onSelect","newCurrentValue","index","findIndex","splice","push","_renderDropdown","TouchableWithoutFeedback","accessible","onPress","View","dropdown","Text","StyleSheet","flatten","textItem","Image","source","icon","tintColor","checkSelected","_renderItem","_ref","selected","assign","_index","TouchableHighlight","toString","underlayColor","wrapItem","renderSearch","input","inputStyle","autoCorrect","placeholderTextColor","_renderList","isTopPosition","isInverted","_renderListHelper","FlatList","keyboardShouldPersistTaps","keyExtractor","_item","flexShrink","_renderModal","onAutoPosition","styleVertical","keyboardStyle","extendHeight","Modal","transparent","statusBarTranslucent","supportedOrientations","onRequestClose","flex1","paddingTop","justifyContent","paddingBottom","container","unSelect","_renderItemSelected","list","check","rowSelectedItem","map","selectedItem","selectedTextLeftItem","selectedTextItem","_renderInside","mainWrap","onLayout","_renderDropdownInside","dropdownInside"],"mappings":"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","sourceRoot":"../../../../src","sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport _ from 'lodash';\nimport React, { useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { Dimensions, FlatList, I18nManager, Image, Keyboard, Modal, StyleSheet, Text, TouchableHighlight, TouchableWithoutFeedback, View, StatusBar } from 'react-native';\nimport { useDetectDevice } from '../../toolkits';\nimport { useDeviceOrientation } from '../../useDeviceOrientation';\nimport CInput from '../TextInput';\nimport { styles } from './styles';\nconst {\n  isTablet\n} = useDetectDevice;\nconst ic_down = require('../../assets/down.png');\nconst statusBarHeight = StatusBar.currentHeight || 0;\nconst MultiSelectComponent = /*#__PURE__*/React.forwardRef((props, currentRef) => {\n  const orientation = useDeviceOrientation();\n  const {\n    testID,\n    itemTestIDField,\n    onChange,\n    data = [],\n    value,\n    style = {},\n    labelField,\n    valueField,\n    searchField,\n    selectedStyle,\n    selectedTextStyle,\n    itemContainerStyle,\n    itemTextStyle,\n    iconStyle,\n    activeColor = '#F6F7F8',\n    containerStyle,\n    fontFamily,\n    placeholderStyle,\n    iconColor = 'gray',\n    inputSearchStyle,\n    searchPlaceholder,\n    placeholder = 'Select item',\n    search = false,\n    maxHeight = 340,\n    minHeight = 0,\n    maxSelect,\n    disable = false,\n    keyboardAvoiding = true,\n    inside = false,\n    inverted = true,\n    renderItem,\n    renderLeftIcon,\n    renderRightIcon,\n    renderSelectedItem,\n    renderInputSearch,\n    onFocus,\n    onBlur,\n    showsVerticalScrollIndicator = true,\n    dropdownPosition = 'auto',\n    flatListProps,\n    alwaysRenderSelectedItem = false,\n    searchQuery,\n    backgroundColor,\n    onChangeText,\n    confirmSelectItem,\n    confirmUnSelectItem,\n    onConfirmSelectItem,\n    accessibilityLabel,\n    itemAccessibilityLabelField,\n    visibleSelectedItem = true\n  } = props;\n  const ref = useRef(null);\n  const [visible, setVisible] = useState(false);\n  const [currentValue, setCurrentValue] = useState([]);\n  const [listData, setListData] = useState(data);\n  const [, setKey] = useState(Math.random());\n  const [position, setPosition] = useState();\n  const [keyboardHeight, setKeyboardHeight] = useState(0);\n  const [searchText, setSearchText] = useState('');\n  const {\n    width: W,\n    height: H\n  } = Dimensions.get('window');\n  const styleContainerVertical = useMemo(() => {\n    return {\n      backgroundColor: 'rgba(0,0,0,0.1)',\n      alignItems: 'center'\n    };\n  }, []);\n  const styleHorizontal = useMemo(() => {\n    return {\n      marginBottom: 20,\n      width: W / 2,\n      alignSelf: 'center'\n    };\n  }, [W]);\n  useImperativeHandle(currentRef, () => {\n    return {\n      open: eventOpen,\n      close: eventClose\n    };\n  });\n  useEffect(() => {\n    setListData([...data]);\n    if (searchText) {\n      onSearch(searchText);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, searchText]);\n  const eventOpen = () => {\n    if (!disable) {\n      setVisible(true);\n      if (onFocus) {\n        onFocus();\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n    }\n  };\n  const eventClose = () => {\n    if (!disable) {\n      setVisible(false);\n      if (onBlur) {\n        onBlur();\n      }\n    }\n  };\n  const font = useCallback(() => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily\n      };\n    } else {\n      return {};\n    }\n  }, [fontFamily]);\n  const getValue = useCallback(() => {\n    setCurrentValue(value ? [...value] : []);\n  }, [value]);\n  const _measure = useCallback(() => {\n    if (ref && ref !== null && ref !== void 0 && ref.current) {\n      ref.current.measureInWindow((pageX, pageY, width, height) => {\n        const isFull = orientation === 'LANDSCAPE' && !isTablet;\n        const top = isFull ? 20 : height + pageY + 2;\n        const bottom = H - top + height;\n        const left = I18nManager.isRTL ? W - width - pageX : pageX;\n        setPosition({\n          isFull,\n          width: Math.floor(width),\n          top: Math.floor(top + statusBarHeight),\n          bottom: Math.floor(bottom - statusBarHeight),\n          left: Math.floor(left),\n          height: Math.floor(height)\n        });\n      });\n    }\n  }, [H, W, orientation]);\n  const onKeyboardDidShow = useCallback(e => {\n    _measure();\n    setKeyboardHeight(e.endCoordinates.height);\n  }, [_measure]);\n  const onKeyboardDidHide = useCallback(() => {\n    setKeyboardHeight(0);\n    _measure();\n  }, [_measure]);\n  useEffect(() => {\n    const susbcriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', onKeyboardDidShow);\n    const susbcriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', onKeyboardDidHide);\n    return () => {\n      if (typeof (susbcriptionKeyboardDidShow === null || susbcriptionKeyboardDidShow === void 0 ? void 0 : susbcriptionKeyboardDidShow.remove) === 'function') {\n        susbcriptionKeyboardDidShow.remove();\n      }\n      if (typeof (susbcriptionKeyboardDidHide === null || susbcriptionKeyboardDidHide === void 0 ? void 0 : susbcriptionKeyboardDidHide.remove) === 'function') {\n        susbcriptionKeyboardDidHide.remove();\n      }\n    };\n  }, [onKeyboardDidHide, onKeyboardDidShow]);\n  useEffect(() => {\n    getValue();\n  }, [getValue, value]);\n  const showOrClose = useCallback(() => {\n    if (!disable) {\n      if (keyboardHeight > 0 && visible) {\n        return Keyboard.dismiss();\n      }\n      _measure();\n      setVisible(!visible);\n      setListData(data);\n      if (!visible) {\n        if (onFocus) {\n          onFocus();\n        }\n      } else {\n        if (onBlur) {\n          onBlur();\n        }\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [disable, keyboardHeight, visible, _measure, data, searchText, onFocus, onBlur]);\n  const onSearch = useCallback(text => {\n    if (text.length > 0) {\n      const defaultFilterFunction = e => {\n        var _$get;\n        const item = (_$get = _.get(e, searchField || labelField)) === null || _$get === void 0 ? void 0 : _$get.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        const key = text.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        return item.indexOf(key) >= 0;\n      };\n      const propSearchFunction = e => {\n        const labelText = _.get(e, searchField || labelField);\n        return searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery(text, labelText);\n      };\n      const dataSearch = data.filter(searchQuery ? propSearchFunction : defaultFilterFunction);\n      setListData(dataSearch);\n    } else {\n      setListData(data);\n    }\n  }, [data, searchField, labelField, searchQuery]);\n  const onSelect = useCallback(item => {\n    const newCurrentValue = [...currentValue];\n    const index = newCurrentValue.findIndex(e => e === _.get(item, valueField));\n    if (index > -1) {\n      newCurrentValue.splice(index, 1);\n    } else {\n      if (maxSelect) {\n        if (newCurrentValue.length < maxSelect) {\n          newCurrentValue.push(_.get(item, valueField));\n        }\n      } else {\n        newCurrentValue.push(_.get(item, valueField));\n      }\n    }\n    if (onConfirmSelectItem) {\n      if (index > -1) {\n        if (confirmUnSelectItem) {\n          onConfirmSelectItem(newCurrentValue);\n        } else {\n          onChange(newCurrentValue);\n        }\n      } else {\n        if (confirmSelectItem) {\n          onConfirmSelectItem(newCurrentValue);\n        } else {\n          onChange(newCurrentValue);\n        }\n      }\n    } else {\n      onChange(newCurrentValue);\n    }\n    setKey(Math.random());\n  }, [confirmSelectItem, confirmUnSelectItem, currentValue, maxSelect, onChange, onConfirmSelectItem, valueField]);\n  const _renderDropdown = () => {\n    return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, /*#__PURE__*/React.createElement(View, {\n      style: styles.dropdown\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(visible), /*#__PURE__*/React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, placeholderStyle, font()])\n    }, placeholder), renderRightIcon ? renderRightIcon(visible) : /*#__PURE__*/React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  const checkSelected = useCallback(item => {\n    const index = currentValue.findIndex(e => e === _.get(item, valueField));\n    return index > -1;\n  }, [currentValue, valueField]);\n  const _renderItem = useCallback(_ref => {\n    let {\n      item,\n      index\n    } = _ref;\n    const selected = checkSelected(item);\n    _.assign(item, {\n      _index: index\n    });\n    return /*#__PURE__*/React.createElement(TouchableHighlight, {\n      key: index.toString(),\n      testID: _.get(item, itemTestIDField || labelField),\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: _.get(item, itemAccessibilityLabelField || labelField),\n      underlayColor: activeColor,\n      onPress: () => onSelect(item)\n    }, /*#__PURE__*/React.createElement(View, {\n      style: StyleSheet.flatten([itemContainerStyle, selected && {\n        backgroundColor: activeColor,\n        ...styles.wrapItem\n      }])\n    }, renderItem ? renderItem(item, selected) : /*#__PURE__*/React.createElement(View, {\n      style: styles.item\n    }, /*#__PURE__*/React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, itemTextStyle, font()])\n    }, _.get(item, labelField)))));\n  }, [accessibilityLabel, activeColor, checkSelected, font, itemAccessibilityLabelField, itemContainerStyle, itemTestIDField, itemTextStyle, labelField, onSelect, renderItem]);\n  const renderSearch = useCallback(() => {\n    if (search) {\n      if (renderInputSearch) {\n        return renderInputSearch(text => {\n          if (onChangeText) {\n            setSearchText(text);\n            onChangeText(text);\n          }\n          onSearch(text);\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(CInput, {\n          testID: testID + ' input',\n          accessibilityLabel: accessibilityLabel + ' input',\n          style: [styles.input, inputSearchStyle],\n          inputStyle: [inputSearchStyle, font()],\n          autoCorrect: false,\n          placeholder: searchPlaceholder,\n          onChangeText: e => {\n            if (onChangeText) {\n              setSearchText(e);\n              onChangeText(e);\n            }\n            onSearch(e);\n          },\n          placeholderTextColor: \"gray\",\n          iconStyle: [{\n            tintColor: iconColor\n          }, iconStyle]\n        });\n      }\n    }\n    return null;\n  }, [accessibilityLabel, font, iconColor, iconStyle, inputSearchStyle, onChangeText, onSearch, renderInputSearch, search, searchPlaceholder, testID]);\n  const _renderList = useCallback(isTopPosition => {\n    const isInverted = !inverted ? false : isTopPosition;\n    const _renderListHelper = () => {\n      return /*#__PURE__*/React.createElement(FlatList, _extends({\n        testID: testID + ' flatlist',\n        accessibilityLabel: accessibilityLabel + ' flatlist'\n      }, flatListProps, {\n        keyboardShouldPersistTaps: \"handled\",\n        data: listData,\n        inverted: isTopPosition ? inverted : false,\n        renderItem: _renderItem,\n        keyExtractor: (_item, index) => index.toString(),\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n      }));\n    };\n    return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, null, /*#__PURE__*/React.createElement(View, {\n      style: styles.flexShrink\n    }, isInverted && _renderListHelper(), renderSearch(), !isInverted && _renderListHelper()));\n  }, [_renderItem, accessibilityLabel, flatListProps, listData, inverted, renderSearch, showsVerticalScrollIndicator, testID]);\n  const _renderModal = useCallback(() => {\n    if (visible && position) {\n      const {\n        isFull,\n        width,\n        height,\n        top,\n        bottom,\n        left\n      } = position;\n      const onAutoPosition = () => {\n        if (keyboardHeight > 0) {\n          return bottom < keyboardHeight + height;\n        }\n        return bottom < (search ? 150 : 100);\n      };\n      if (width && top && bottom) {\n        const styleVertical = {\n          left: left,\n          maxHeight: maxHeight,\n          minHeight: minHeight\n        };\n        const isTopPosition = dropdownPosition === 'auto' ? onAutoPosition() : dropdownPosition === 'top';\n        let keyboardStyle = {};\n        let extendHeight = !isTopPosition ? top : bottom;\n        if (keyboardAvoiding && keyboardHeight > 0 && isTopPosition && dropdownPosition === 'auto') {\n          extendHeight = keyboardHeight;\n        }\n        return /*#__PURE__*/React.createElement(Modal, {\n          transparent: true,\n          statusBarTranslucent: true,\n          visible: visible,\n          supportedOrientations: ['landscape', 'portrait'],\n          onRequestClose: showOrClose\n        }, /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n          onPress: showOrClose\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, isFull && styleContainerVertical, backgroundColor && {\n            backgroundColor: backgroundColor\n          }, keyboardStyle])\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, {\n            width\n          }, !isTopPosition ? {\n            paddingTop: extendHeight\n          } : {\n            justifyContent: 'flex-end',\n            paddingBottom: extendHeight\n          }])\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.container, containerStyle, isFull ? styleHorizontal : styleVertical])\n        }, _renderList(isTopPosition))))));\n      }\n      return null;\n    }\n    return null;\n  }, [visible, search, position, keyboardHeight, maxHeight, minHeight, dropdownPosition, keyboardAvoiding, showOrClose, styleContainerVertical, backgroundColor, containerStyle, styleHorizontal, _renderList]);\n  const unSelect = item => {\n    if (!disable) {\n      onSelect(item);\n    }\n  };\n  const _renderItemSelected = inside => {\n    const list = data.filter(e => {\n      const check = value === null || value === void 0 ? void 0 : value.indexOf(_.get(e, valueField));\n      if (check !== -1) {\n        return e;\n      }\n    });\n    return /*#__PURE__*/React.createElement(View, {\n      style: StyleSheet.flatten([styles.rowSelectedItem, inside && styles.flex1])\n    }, list.map(e => {\n      if (renderSelectedItem) {\n        return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n          testID: _.get(e, itemTestIDField || labelField),\n          accessible: !!accessibilityLabel,\n          accessibilityLabel: _.get(e, itemAccessibilityLabelField || labelField),\n          key: _.get(e, labelField),\n          onPress: () => unSelect(e)\n        }, renderSelectedItem(e, () => {\n          unSelect(e);\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n          testID: _.get(e, itemTestIDField || labelField),\n          accessible: !!accessibilityLabel,\n          accessibilityLabel: _.get(e, itemAccessibilityLabelField || labelField),\n          key: _.get(e, labelField),\n          onPress: () => unSelect(e)\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.selectedItem, selectedStyle])\n        }, /*#__PURE__*/React.createElement(Text, {\n          style: StyleSheet.flatten([styles.selectedTextLeftItem, selectedTextStyle, font()])\n        }, _.get(e, labelField)), /*#__PURE__*/React.createElement(Text, {\n          style: StyleSheet.flatten([styles.selectedTextItem, selectedTextStyle])\n        }, \"\\u24E7\")));\n      }\n    }));\n  };\n  const _renderInside = () => {\n    return /*#__PURE__*/React.createElement(View, {\n      style: StyleSheet.flatten([styles.mainWrap, style]),\n      ref: ref,\n      onLayout: _measure\n    }, _renderDropdownInside(), _renderModal());\n  };\n  const _renderDropdownInside = () => {\n    return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, /*#__PURE__*/React.createElement(View, {\n      style: styles.dropdownInside\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(), value && (value === null || value === void 0 ? void 0 : value.length) > 0 ? _renderItemSelected(true) : /*#__PURE__*/React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, placeholderStyle, font()])\n    }, placeholder), renderRightIcon ? renderRightIcon() : /*#__PURE__*/React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  if (inside) {\n    return _renderInside();\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(View, {\n    style: StyleSheet.flatten([styles.mainWrap, style]),\n    ref: ref,\n    onLayout: _measure\n  }, _renderDropdown(), _renderModal()), (!visible || alwaysRenderSelectedItem) && visibleSelectedItem && _renderItemSelected(false));\n});\nexport default MultiSelectComponent;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}