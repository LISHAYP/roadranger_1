{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport _ from 'lodash';\nimport React, { useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { useDetectDevice } from \"../../toolkits\";\nimport { useDeviceOrientation } from \"../../useDeviceOrientation\";\nimport CInput from \"../TextInput\";\nimport { styles } from \"./styles\";\nvar isTablet = useDetectDevice.isTablet;\nvar ic_down = require(\"../../assets/down.png\");\nvar statusBarHeight = StatusBar.currentHeight || 0;\nvar DropdownComponent = React.forwardRef(function (props, currentRef) {\n  var orientation = useDeviceOrientation();\n  var testID = props.testID,\n    itemTestIDField = props.itemTestIDField,\n    onChange = props.onChange,\n    _props$style = props.style,\n    style = _props$style === void 0 ? {} : _props$style,\n    containerStyle = props.containerStyle,\n    placeholderStyle = props.placeholderStyle,\n    selectedTextStyle = props.selectedTextStyle,\n    itemContainerStyle = props.itemContainerStyle,\n    itemTextStyle = props.itemTextStyle,\n    inputSearchStyle = props.inputSearchStyle,\n    iconStyle = props.iconStyle,\n    _props$selectedTextPr = props.selectedTextProps,\n    selectedTextProps = _props$selectedTextPr === void 0 ? {} : _props$selectedTextPr,\n    _props$data = props.data,\n    data = _props$data === void 0 ? [] : _props$data,\n    labelField = props.labelField,\n    valueField = props.valueField,\n    searchField = props.searchField,\n    value = props.value,\n    _props$activeColor = props.activeColor,\n    activeColor = _props$activeColor === void 0 ? '#F6F7F8' : _props$activeColor,\n    fontFamily = props.fontFamily,\n    _props$iconColor = props.iconColor,\n    iconColor = _props$iconColor === void 0 ? 'gray' : _props$iconColor,\n    searchPlaceholder = props.searchPlaceholder,\n    _props$placeholder = props.placeholder,\n    placeholder = _props$placeholder === void 0 ? 'Select item' : _props$placeholder,\n    _props$search = props.search,\n    search = _props$search === void 0 ? false : _props$search,\n    _props$maxHeight = props.maxHeight,\n    maxHeight = _props$maxHeight === void 0 ? 340 : _props$maxHeight,\n    _props$minHeight = props.minHeight,\n    minHeight = _props$minHeight === void 0 ? 0 : _props$minHeight,\n    _props$disable = props.disable,\n    disable = _props$disable === void 0 ? false : _props$disable,\n    _props$keyboardAvoidi = props.keyboardAvoiding,\n    keyboardAvoiding = _props$keyboardAvoidi === void 0 ? true : _props$keyboardAvoidi,\n    _props$inverted = props.inverted,\n    inverted = _props$inverted === void 0 ? true : _props$inverted,\n    renderLeftIcon = props.renderLeftIcon,\n    renderRightIcon = props.renderRightIcon,\n    renderItem = props.renderItem,\n    renderInputSearch = props.renderInputSearch,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    _props$autoScroll = props.autoScroll,\n    autoScroll = _props$autoScroll === void 0 ? true : _props$autoScroll,\n    _props$showsVerticalS = props.showsVerticalScrollIndicator,\n    showsVerticalScrollIndicator = _props$showsVerticalS === void 0 ? true : _props$showsVerticalS,\n    _props$dropdownPositi = props.dropdownPosition,\n    dropdownPosition = _props$dropdownPositi === void 0 ? 'auto' : _props$dropdownPositi,\n    flatListProps = props.flatListProps,\n    searchQuery = props.searchQuery,\n    backgroundColor = props.backgroundColor,\n    _onChangeText = props.onChangeText,\n    confirmSelectItem = props.confirmSelectItem,\n    onConfirmSelectItem = props.onConfirmSelectItem,\n    accessibilityLabel = props.accessibilityLabel,\n    itemAccessibilityLabelField = props.itemAccessibilityLabelField;\n  var ref = useRef(null);\n  var refList = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentValue = _useState4[0],\n    setCurrentValue = _useState4[1];\n  var _useState5 = useState(data),\n    _useState6 = _slicedToArray(_useState5, 2),\n    listData = _useState6[0],\n    setListData = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    position = _useState8[0],\n    setPosition = _useState8[1];\n  var _useState9 = useState(0),\n    _useState10 = _slicedToArray(_useState9, 2),\n    keyboardHeight = _useState10[0],\n    setKeyboardHeight = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    searchText = _useState12[0],\n    setSearchText = _useState12[1];\n  var _Dimensions$get = Dimensions.get('window'),\n    W = _Dimensions$get.width,\n    H = _Dimensions$get.height;\n  var styleContainerVertical = useMemo(function () {\n    return {\n      backgroundColor: 'rgba(0,0,0,0.1)',\n      alignItems: 'center'\n    };\n  }, []);\n  var styleHorizontal = useMemo(function () {\n    return {\n      marginBottom: 20,\n      width: W / 2,\n      alignSelf: 'center'\n    };\n  }, [W]);\n  useImperativeHandle(currentRef, function () {\n    return {\n      open: eventOpen,\n      close: eventClose\n    };\n  });\n  useEffect(function () {\n    setListData(_toConsumableArray(data));\n    if (searchText) {\n      onSearch(searchText);\n    }\n  }, [data, searchText]);\n  var eventOpen = function eventOpen() {\n    if (!disable) {\n      setVisible(true);\n      if (onFocus) {\n        onFocus();\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n      scrollIndex();\n    }\n  };\n  var eventClose = useCallback(function () {\n    if (!disable) {\n      setVisible(false);\n      if (onBlur) {\n        onBlur();\n      }\n    }\n  }, [disable, onBlur]);\n  var font = useCallback(function () {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily\n      };\n    } else {\n      return {};\n    }\n  }, [fontFamily]);\n  var _measure = useCallback(function () {\n    if (ref && ref !== null && ref !== void 0 && ref.current) {\n      ref.current.measureInWindow(function (pageX, pageY, width, height) {\n        var isFull = orientation === 'LANDSCAPE' && !isTablet;\n        var top = isFull ? 20 : height + pageY + 2;\n        var bottom = H - top + height;\n        var left = I18nManager.isRTL ? W - width - pageX : pageX;\n        setPosition({\n          isFull: isFull,\n          width: Math.floor(width),\n          top: Math.floor(top + statusBarHeight),\n          bottom: Math.floor(bottom - statusBarHeight),\n          left: Math.floor(left),\n          height: Math.floor(height)\n        });\n      });\n    }\n  }, [H, W, orientation]);\n  var onKeyboardDidShow = useCallback(function (e) {\n    _measure();\n    setKeyboardHeight(e.endCoordinates.height);\n  }, [_measure]);\n  var onKeyboardDidHide = useCallback(function () {\n    setKeyboardHeight(0);\n    _measure();\n  }, [_measure]);\n  useEffect(function () {\n    var susbcriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', onKeyboardDidShow);\n    var susbcriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', onKeyboardDidHide);\n    return function () {\n      if (typeof (susbcriptionKeyboardDidShow === null || susbcriptionKeyboardDidShow === void 0 ? void 0 : susbcriptionKeyboardDidShow.remove) === 'function') {\n        susbcriptionKeyboardDidShow.remove();\n      }\n      if (typeof (susbcriptionKeyboardDidHide === null || susbcriptionKeyboardDidHide === void 0 ? void 0 : susbcriptionKeyboardDidHide.remove) === 'function') {\n        susbcriptionKeyboardDidHide.remove();\n      }\n    };\n  }, [onKeyboardDidHide, onKeyboardDidShow]);\n  var getValue = useCallback(function () {\n    var defaultValue = typeof value === 'object' ? _.get(value, valueField) : value;\n    var getItem = data.filter(function (e) {\n      return _.isEqual(defaultValue, _.get(e, valueField));\n    });\n    if (getItem.length > 0) {\n      setCurrentValue(getItem[0]);\n    } else {\n      setCurrentValue(null);\n    }\n  }, [data, value, valueField]);\n  useEffect(function () {\n    getValue();\n  }, [value, data, getValue]);\n  var scrollIndex = useCallback(function () {\n    if (autoScroll && data.length > 0 && listData.length === data.length) {\n      setTimeout(function () {\n        if (refList && refList !== null && refList !== void 0 && refList.current) {\n          var defaultValue = typeof value === 'object' ? _.get(value, valueField) : value;\n          var index = _.findIndex(listData, function (e) {\n            return _.isEqual(defaultValue, _.get(e, valueField));\n          });\n          if (index > -1 && index <= listData.length - 1) {\n            var _refList$current;\n            refList === null || refList === void 0 ? void 0 : (_refList$current = refList.current) === null || _refList$current === void 0 ? void 0 : _refList$current.scrollToIndex({\n              index: index,\n              animated: false\n            });\n          }\n        }\n      }, 200);\n    }\n  }, [autoScroll, data.length, listData, value, valueField]);\n  var showOrClose = useCallback(function () {\n    if (!disable) {\n      if (keyboardHeight > 0 && visible) {\n        return Keyboard.dismiss();\n      }\n      _measure();\n      setVisible(!visible);\n      setListData(data);\n      if (!visible) {\n        if (onFocus) {\n          onFocus();\n        }\n      } else {\n        if (onBlur) {\n          onBlur();\n        }\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n      scrollIndex();\n    }\n  }, [disable, keyboardHeight, visible, _measure, data, searchText, scrollIndex, onFocus, onBlur]);\n  var onSearch = useCallback(function (text) {\n    if (text.length > 0) {\n      var defaultFilterFunction = function defaultFilterFunction(e) {\n        var _$get;\n        var item = (_$get = _.get(e, searchField || labelField)) === null || _$get === void 0 ? void 0 : _$get.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        var key = text.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        return item.indexOf(key) >= 0;\n      };\n      var propSearchFunction = function propSearchFunction(e) {\n        var labelText = _.get(e, searchField || labelField);\n        return searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery(text, labelText);\n      };\n      var dataSearch = data.filter(searchQuery ? propSearchFunction : defaultFilterFunction);\n      setListData(dataSearch);\n    } else {\n      setListData(data);\n    }\n  }, [data, searchField, labelField, searchQuery]);\n  var onSelect = useCallback(function (item) {\n    if (confirmSelectItem && onConfirmSelectItem) {\n      return onConfirmSelectItem(item);\n    }\n    if (_onChangeText) {\n      setSearchText('');\n      _onChangeText('');\n    }\n    onSearch('');\n    setCurrentValue(item);\n    onChange(item);\n    eventClose();\n  }, [confirmSelectItem, eventClose, onChange, _onChangeText, onConfirmSelectItem, onSearch]);\n  var _renderDropdown = function _renderDropdown() {\n    var isSelected = currentValue && _.get(currentValue, valueField);\n    return React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, React.createElement(View, {\n      style: styles.dropdown\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(visible), React.createElement(Text, _extends({\n      style: [styles.textItem, isSelected !== null ? selectedTextStyle : placeholderStyle, font()]\n    }, selectedTextProps), isSelected !== null ? _.get(currentValue, labelField) : placeholder), renderRightIcon ? renderRightIcon(visible) : React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  var _renderItem = useCallback(function (_ref) {\n    var item = _ref.item,\n      index = _ref.index;\n    var isSelected = currentValue && _.get(currentValue, valueField);\n    var selected = _.isEqual(_.get(item, valueField), isSelected);\n    _.assign(item, {\n      _index: index\n    });\n    return React.createElement(TouchableHighlight, {\n      key: index.toString(),\n      testID: _.get(item, itemTestIDField || labelField),\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: _.get(item, itemAccessibilityLabelField || labelField),\n      underlayColor: activeColor,\n      onPress: function onPress() {\n        return onSelect(item);\n      }\n    }, React.createElement(View, {\n      style: StyleSheet.flatten([itemContainerStyle, selected && {\n        backgroundColor: activeColor\n      }])\n    }, renderItem ? renderItem(item, selected) : React.createElement(View, {\n      style: styles.item\n    }, React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, itemTextStyle, font()])\n    }, _.get(item, labelField)))));\n  }, [accessibilityLabel, activeColor, currentValue, font, itemAccessibilityLabelField, itemContainerStyle, itemTestIDField, itemTextStyle, labelField, onSelect, renderItem, valueField]);\n  var renderSearch = useCallback(function () {\n    if (search) {\n      if (renderInputSearch) {\n        return renderInputSearch(function (text) {\n          if (_onChangeText) {\n            setSearchText(text);\n            _onChangeText(text);\n          }\n          onSearch(text);\n        });\n      } else {\n        return React.createElement(CInput, {\n          testID: testID + ' input',\n          accessibilityLabel: accessibilityLabel + ' input',\n          style: [styles.input, inputSearchStyle],\n          inputStyle: [inputSearchStyle, font()],\n          value: searchText,\n          autoCorrect: false,\n          placeholder: searchPlaceholder,\n          onChangeText: function onChangeText(e) {\n            if (_onChangeText) {\n              setSearchText(e);\n              _onChangeText(e);\n            }\n            onSearch(e);\n          },\n          placeholderTextColor: \"gray\",\n          iconStyle: [{\n            tintColor: iconColor\n          }, iconStyle]\n        });\n      }\n    }\n    return null;\n  }, [accessibilityLabel, font, iconColor, iconStyle, inputSearchStyle, _onChangeText, onSearch, renderInputSearch, search, searchPlaceholder, testID, searchText]);\n  var _renderList = useCallback(function (isTopPosition) {\n    var isInverted = !inverted ? false : isTopPosition;\n    var _renderListHelper = function _renderListHelper() {\n      return React.createElement(FlatList, _extends({\n        testID: testID + ' flatlist',\n        accessibilityLabel: accessibilityLabel + ' flatlist'\n      }, flatListProps, {\n        keyboardShouldPersistTaps: \"handled\",\n        ref: refList,\n        onScrollToIndexFailed: scrollIndex,\n        data: listData,\n        inverted: isTopPosition ? inverted : false,\n        renderItem: _renderItem,\n        keyExtractor: function keyExtractor(_item, index) {\n          return index.toString();\n        },\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n      }));\n    };\n    return React.createElement(TouchableWithoutFeedback, null, React.createElement(View, {\n      style: styles.flexShrink\n    }, isInverted && _renderListHelper(), renderSearch(), !isInverted && _renderListHelper()));\n  }, [_renderItem, accessibilityLabel, flatListProps, listData, inverted, renderSearch, scrollIndex, showsVerticalScrollIndicator, testID]);\n  var _renderModal = useCallback(function () {\n    if (visible && position) {\n      var isFull = position.isFull,\n        width = position.width,\n        height = position.height,\n        top = position.top,\n        bottom = position.bottom,\n        left = position.left;\n      var onAutoPosition = function onAutoPosition() {\n        if (keyboardHeight > 0) {\n          return bottom < keyboardHeight + height;\n        }\n        return bottom < (search ? 150 : 100);\n      };\n      if (width && top && bottom) {\n        var styleVertical = {\n          left: left,\n          maxHeight: maxHeight,\n          minHeight: minHeight\n        };\n        var isTopPosition = dropdownPosition === 'auto' ? onAutoPosition() : dropdownPosition === 'top';\n        var keyboardStyle = {};\n        var extendHeight = !isTopPosition ? top : bottom;\n        if (keyboardAvoiding && keyboardHeight > 0 && isTopPosition && dropdownPosition === 'auto') {\n          extendHeight = keyboardHeight;\n        }\n        return React.createElement(Modal, {\n          transparent: true,\n          statusBarTranslucent: true,\n          visible: visible,\n          supportedOrientations: ['landscape', 'portrait'],\n          onRequestClose: showOrClose\n        }, React.createElement(TouchableWithoutFeedback, {\n          onPress: showOrClose\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, isFull && styleContainerVertical, backgroundColor && {\n            backgroundColor: backgroundColor\n          }, keyboardStyle])\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, {\n            width: width\n          }, !isTopPosition ? {\n            paddingTop: extendHeight\n          } : {\n            justifyContent: 'flex-end',\n            paddingBottom: extendHeight\n          }])\n        }, React.createElement(View, {\n          style: StyleSheet.flatten([styles.container, containerStyle, isFull ? styleHorizontal : styleVertical])\n        }, _renderList(isTopPosition))))));\n      }\n      return null;\n    }\n    return null;\n  }, [visible, search, position, keyboardHeight, maxHeight, minHeight, dropdownPosition, keyboardAvoiding, showOrClose, styleContainerVertical, backgroundColor, containerStyle, styleHorizontal, _renderList]);\n  return React.createElement(View, {\n    style: StyleSheet.flatten([styles.mainWrap, style]),\n    ref: ref,\n    onLayout: _measure\n  }, _renderDropdown(), _renderModal());\n});\nexport default DropdownComponent;","map":{"version":3,"sources":["components/Dropdown/index.tsx"],"names":["_","React","useCallback","useEffect","useImperativeHandle","useMemo","useRef","useState","useDetectDevice","useDeviceOrientation","CInput","styles","isTablet","ic_down","require","statusBarHeight","StatusBar","currentHeight","DropdownComponent","forwardRef","props","currentRef","orientation","testID","itemTestIDField","onChange","style","containerStyle","placeholderStyle","selectedTextStyle","itemContainerStyle","itemTextStyle","inputSearchStyle","iconStyle","selectedTextProps","data","labelField","valueField","searchField","value","activeColor","fontFamily","iconColor","searchPlaceholder","placeholder","search","maxHeight","minHeight","disable","keyboardAvoiding","inverted","renderLeftIcon","renderRightIcon","renderItem","renderInputSearch","onFocus","onBlur","autoScroll","showsVerticalScrollIndicator","dropdownPosition","flatListProps","searchQuery","backgroundColor","onChangeText","confirmSelectItem","onConfirmSelectItem","accessibilityLabel","itemAccessibilityLabelField","ref","refList","visible","setVisible","currentValue","setCurrentValue","listData","setListData","position","setPosition","keyboardHeight","setKeyboardHeight","searchText","setSearchText","width","W","height","H","Dimensions","get","styleContainerVertical","alignItems","styleHorizontal","marginBottom","alignSelf","open","eventOpen","close","eventClose","onSearch","length","scrollIndex","font","_measure","current","measureInWindow","pageX","pageY","isFull","top","bottom","left","I18nManager","isRTL","Math","floor","onKeyboardDidShow","e","endCoordinates","onKeyboardDidHide","susbcriptionKeyboardDidShow","Keyboard","addListener","susbcriptionKeyboardDidHide","remove","getValue","defaultValue","getItem","filter","isEqual","setTimeout","index","findIndex","scrollToIndex","animated","showOrClose","dismiss","text","defaultFilterFunction","item","toLowerCase","replace","normalize","key","indexOf","propSearchFunction","labelText","dataSearch","onSelect","_renderDropdown","isSelected","TouchableWithoutFeedback","accessible","onPress","View","dropdown","Text","textItem","Image","source","StyleSheet","flatten","icon","tintColor","_renderItem","_ref","selected","assign","_index","TouchableHighlight","toString","underlayColor","renderSearch","input","inputStyle","autoCorrect","placeholderTextColor","_renderList","isTopPosition","isInverted","_renderListHelper","FlatList","keyboardShouldPersistTaps","onScrollToIndexFailed","keyExtractor","_item","flexShrink","_renderModal","onAutoPosition","styleVertical","keyboardStyle","extendHeight","Modal","transparent","statusBarTranslucent","supportedOrientations","onRequestClose","flex1","paddingTop","justifyContent","paddingBottom","container","mainWrap","onLayout"],"mappings":"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","sourceRoot":"../../../../src","sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport _ from 'lodash';\nimport React, { useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { Dimensions, FlatList, I18nManager, Image, Keyboard, Modal, StyleSheet, Text, TouchableHighlight, TouchableWithoutFeedback, View, StatusBar } from 'react-native';\nimport { useDetectDevice } from '../../toolkits';\nimport { useDeviceOrientation } from '../../useDeviceOrientation';\nimport CInput from '../TextInput';\nimport { styles } from './styles';\nconst {\n  isTablet\n} = useDetectDevice;\nconst ic_down = require('../../assets/down.png');\nconst statusBarHeight = StatusBar.currentHeight || 0;\nconst DropdownComponent = /*#__PURE__*/React.forwardRef((props, currentRef) => {\n  const orientation = useDeviceOrientation();\n  const {\n    testID,\n    itemTestIDField,\n    onChange,\n    style = {},\n    containerStyle,\n    placeholderStyle,\n    selectedTextStyle,\n    itemContainerStyle,\n    itemTextStyle,\n    inputSearchStyle,\n    iconStyle,\n    selectedTextProps = {},\n    data = [],\n    labelField,\n    valueField,\n    searchField,\n    value,\n    activeColor = '#F6F7F8',\n    fontFamily,\n    iconColor = 'gray',\n    searchPlaceholder,\n    placeholder = 'Select item',\n    search = false,\n    maxHeight = 340,\n    minHeight = 0,\n    disable = false,\n    keyboardAvoiding = true,\n    inverted = true,\n    renderLeftIcon,\n    renderRightIcon,\n    renderItem,\n    renderInputSearch,\n    onFocus,\n    onBlur,\n    autoScroll = true,\n    showsVerticalScrollIndicator = true,\n    dropdownPosition = 'auto',\n    flatListProps,\n    searchQuery,\n    backgroundColor,\n    onChangeText,\n    confirmSelectItem,\n    onConfirmSelectItem,\n    accessibilityLabel,\n    itemAccessibilityLabelField\n  } = props;\n  const ref = useRef(null);\n  const refList = useRef(null);\n  const [visible, setVisible] = useState(false);\n  const [currentValue, setCurrentValue] = useState(null);\n  const [listData, setListData] = useState(data);\n  const [position, setPosition] = useState();\n  const [keyboardHeight, setKeyboardHeight] = useState(0);\n  const [searchText, setSearchText] = useState('');\n  const {\n    width: W,\n    height: H\n  } = Dimensions.get('window');\n  const styleContainerVertical = useMemo(() => {\n    return {\n      backgroundColor: 'rgba(0,0,0,0.1)',\n      alignItems: 'center'\n    };\n  }, []);\n  const styleHorizontal = useMemo(() => {\n    return {\n      marginBottom: 20,\n      width: W / 2,\n      alignSelf: 'center'\n    };\n  }, [W]);\n  useImperativeHandle(currentRef, () => {\n    return {\n      open: eventOpen,\n      close: eventClose\n    };\n  });\n  useEffect(() => {\n    setListData([...data]);\n    if (searchText) {\n      onSearch(searchText);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, searchText]);\n  const eventOpen = () => {\n    if (!disable) {\n      setVisible(true);\n      if (onFocus) {\n        onFocus();\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n      scrollIndex();\n    }\n  };\n  const eventClose = useCallback(() => {\n    if (!disable) {\n      setVisible(false);\n      if (onBlur) {\n        onBlur();\n      }\n    }\n  }, [disable, onBlur]);\n  const font = useCallback(() => {\n    if (fontFamily) {\n      return {\n        fontFamily: fontFamily\n      };\n    } else {\n      return {};\n    }\n  }, [fontFamily]);\n  const _measure = useCallback(() => {\n    if (ref && ref !== null && ref !== void 0 && ref.current) {\n      ref.current.measureInWindow((pageX, pageY, width, height) => {\n        const isFull = orientation === 'LANDSCAPE' && !isTablet;\n        const top = isFull ? 20 : height + pageY + 2;\n        const bottom = H - top + height;\n        const left = I18nManager.isRTL ? W - width - pageX : pageX;\n        setPosition({\n          isFull,\n          width: Math.floor(width),\n          top: Math.floor(top + statusBarHeight),\n          bottom: Math.floor(bottom - statusBarHeight),\n          left: Math.floor(left),\n          height: Math.floor(height)\n        });\n      });\n    }\n  }, [H, W, orientation]);\n  const onKeyboardDidShow = useCallback(e => {\n    _measure();\n    setKeyboardHeight(e.endCoordinates.height);\n  }, [_measure]);\n  const onKeyboardDidHide = useCallback(() => {\n    setKeyboardHeight(0);\n    _measure();\n  }, [_measure]);\n  useEffect(() => {\n    const susbcriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', onKeyboardDidShow);\n    const susbcriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', onKeyboardDidHide);\n    return () => {\n      if (typeof (susbcriptionKeyboardDidShow === null || susbcriptionKeyboardDidShow === void 0 ? void 0 : susbcriptionKeyboardDidShow.remove) === 'function') {\n        susbcriptionKeyboardDidShow.remove();\n      }\n      if (typeof (susbcriptionKeyboardDidHide === null || susbcriptionKeyboardDidHide === void 0 ? void 0 : susbcriptionKeyboardDidHide.remove) === 'function') {\n        susbcriptionKeyboardDidHide.remove();\n      }\n    };\n  }, [onKeyboardDidHide, onKeyboardDidShow]);\n  const getValue = useCallback(() => {\n    const defaultValue = typeof value === 'object' ? _.get(value, valueField) : value;\n    const getItem = data.filter(e => _.isEqual(defaultValue, _.get(e, valueField)));\n    if (getItem.length > 0) {\n      setCurrentValue(getItem[0]);\n    } else {\n      setCurrentValue(null);\n    }\n  }, [data, value, valueField]);\n  useEffect(() => {\n    getValue();\n  }, [value, data, getValue]);\n  const scrollIndex = useCallback(() => {\n    if (autoScroll && data.length > 0 && listData.length === data.length) {\n      setTimeout(() => {\n        if (refList && refList !== null && refList !== void 0 && refList.current) {\n          const defaultValue = typeof value === 'object' ? _.get(value, valueField) : value;\n          const index = _.findIndex(listData, e => _.isEqual(defaultValue, _.get(e, valueField)));\n          if (index > -1 && index <= listData.length - 1) {\n            var _refList$current;\n            refList === null || refList === void 0 ? void 0 : (_refList$current = refList.current) === null || _refList$current === void 0 ? void 0 : _refList$current.scrollToIndex({\n              index: index,\n              animated: false\n            });\n          }\n        }\n      }, 200);\n    }\n  }, [autoScroll, data.length, listData, value, valueField]);\n  const showOrClose = useCallback(() => {\n    if (!disable) {\n      if (keyboardHeight > 0 && visible) {\n        return Keyboard.dismiss();\n      }\n      _measure();\n      setVisible(!visible);\n      setListData(data);\n      if (!visible) {\n        if (onFocus) {\n          onFocus();\n        }\n      } else {\n        if (onBlur) {\n          onBlur();\n        }\n      }\n      if (searchText.length > 0) {\n        onSearch(searchText);\n      }\n      scrollIndex();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [disable, keyboardHeight, visible, _measure, data, searchText, scrollIndex, onFocus, onBlur]);\n  const onSearch = useCallback(text => {\n    if (text.length > 0) {\n      const defaultFilterFunction = e => {\n        var _$get;\n        const item = (_$get = _.get(e, searchField || labelField)) === null || _$get === void 0 ? void 0 : _$get.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        const key = text.toLowerCase().replace(' ', '').normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        return item.indexOf(key) >= 0;\n      };\n      const propSearchFunction = e => {\n        const labelText = _.get(e, searchField || labelField);\n        return searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery(text, labelText);\n      };\n      const dataSearch = data.filter(searchQuery ? propSearchFunction : defaultFilterFunction);\n      setListData(dataSearch);\n    } else {\n      setListData(data);\n    }\n  }, [data, searchField, labelField, searchQuery]);\n  const onSelect = useCallback(item => {\n    if (confirmSelectItem && onConfirmSelectItem) {\n      return onConfirmSelectItem(item);\n    }\n    if (onChangeText) {\n      setSearchText('');\n      onChangeText('');\n    }\n    onSearch('');\n    setCurrentValue(item);\n    onChange(item);\n    eventClose();\n  }, [confirmSelectItem, eventClose, onChange, onChangeText, onConfirmSelectItem, onSearch]);\n  const _renderDropdown = () => {\n    const isSelected = currentValue && _.get(currentValue, valueField);\n    return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n      testID: testID,\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: accessibilityLabel,\n      onPress: showOrClose\n    }, /*#__PURE__*/React.createElement(View, {\n      style: styles.dropdown\n    }, renderLeftIcon === null || renderLeftIcon === void 0 ? void 0 : renderLeftIcon(visible), /*#__PURE__*/React.createElement(Text, _extends({\n      style: [styles.textItem, isSelected !== null ? selectedTextStyle : placeholderStyle, font()]\n    }, selectedTextProps), isSelected !== null ? _.get(currentValue, labelField) : placeholder), renderRightIcon ? renderRightIcon(visible) : /*#__PURE__*/React.createElement(Image, {\n      source: ic_down,\n      style: StyleSheet.flatten([styles.icon, {\n        tintColor: iconColor\n      }, iconStyle])\n    })));\n  };\n  const _renderItem = useCallback(_ref => {\n    let {\n      item,\n      index\n    } = _ref;\n    const isSelected = currentValue && _.get(currentValue, valueField);\n    const selected = _.isEqual(_.get(item, valueField), isSelected);\n    _.assign(item, {\n      _index: index\n    });\n    return /*#__PURE__*/React.createElement(TouchableHighlight, {\n      key: index.toString(),\n      testID: _.get(item, itemTestIDField || labelField),\n      accessible: !!accessibilityLabel,\n      accessibilityLabel: _.get(item, itemAccessibilityLabelField || labelField),\n      underlayColor: activeColor,\n      onPress: () => onSelect(item)\n    }, /*#__PURE__*/React.createElement(View, {\n      style: StyleSheet.flatten([itemContainerStyle, selected && {\n        backgroundColor: activeColor\n      }])\n    }, renderItem ? renderItem(item, selected) : /*#__PURE__*/React.createElement(View, {\n      style: styles.item\n    }, /*#__PURE__*/React.createElement(Text, {\n      style: StyleSheet.flatten([styles.textItem, itemTextStyle, font()])\n    }, _.get(item, labelField)))));\n  }, [accessibilityLabel, activeColor, currentValue, font, itemAccessibilityLabelField, itemContainerStyle, itemTestIDField, itemTextStyle, labelField, onSelect, renderItem, valueField]);\n  const renderSearch = useCallback(() => {\n    if (search) {\n      if (renderInputSearch) {\n        return renderInputSearch(text => {\n          if (onChangeText) {\n            setSearchText(text);\n            onChangeText(text);\n          }\n          onSearch(text);\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(CInput, {\n          testID: testID + ' input',\n          accessibilityLabel: accessibilityLabel + ' input',\n          style: [styles.input, inputSearchStyle],\n          inputStyle: [inputSearchStyle, font()],\n          value: searchText,\n          autoCorrect: false,\n          placeholder: searchPlaceholder,\n          onChangeText: e => {\n            if (onChangeText) {\n              setSearchText(e);\n              onChangeText(e);\n            }\n            onSearch(e);\n          },\n          placeholderTextColor: \"gray\",\n          iconStyle: [{\n            tintColor: iconColor\n          }, iconStyle]\n        });\n      }\n    }\n    return null;\n  }, [accessibilityLabel, font, iconColor, iconStyle, inputSearchStyle, onChangeText, onSearch, renderInputSearch, search, searchPlaceholder, testID, searchText]);\n  const _renderList = useCallback(isTopPosition => {\n    const isInverted = !inverted ? false : isTopPosition;\n    const _renderListHelper = () => {\n      return /*#__PURE__*/React.createElement(FlatList, _extends({\n        testID: testID + ' flatlist',\n        accessibilityLabel: accessibilityLabel + ' flatlist'\n      }, flatListProps, {\n        keyboardShouldPersistTaps: \"handled\",\n        ref: refList,\n        onScrollToIndexFailed: scrollIndex,\n        data: listData,\n        inverted: isTopPosition ? inverted : false,\n        renderItem: _renderItem,\n        keyExtractor: (_item, index) => index.toString(),\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n      }));\n    };\n    return /*#__PURE__*/React.createElement(TouchableWithoutFeedback, null, /*#__PURE__*/React.createElement(View, {\n      style: styles.flexShrink\n    }, isInverted && _renderListHelper(), renderSearch(), !isInverted && _renderListHelper()));\n  }, [_renderItem, accessibilityLabel, flatListProps, listData, inverted, renderSearch, scrollIndex, showsVerticalScrollIndicator, testID]);\n  const _renderModal = useCallback(() => {\n    if (visible && position) {\n      const {\n        isFull,\n        width,\n        height,\n        top,\n        bottom,\n        left\n      } = position;\n      const onAutoPosition = () => {\n        if (keyboardHeight > 0) {\n          return bottom < keyboardHeight + height;\n        }\n        return bottom < (search ? 150 : 100);\n      };\n      if (width && top && bottom) {\n        const styleVertical = {\n          left: left,\n          maxHeight: maxHeight,\n          minHeight: minHeight\n        };\n        const isTopPosition = dropdownPosition === 'auto' ? onAutoPosition() : dropdownPosition === 'top';\n        let keyboardStyle = {};\n        let extendHeight = !isTopPosition ? top : bottom;\n        if (keyboardAvoiding && keyboardHeight > 0 && isTopPosition && dropdownPosition === 'auto') {\n          extendHeight = keyboardHeight;\n        }\n        return /*#__PURE__*/React.createElement(Modal, {\n          transparent: true,\n          statusBarTranslucent: true,\n          visible: visible,\n          supportedOrientations: ['landscape', 'portrait'],\n          onRequestClose: showOrClose\n        }, /*#__PURE__*/React.createElement(TouchableWithoutFeedback, {\n          onPress: showOrClose\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, isFull && styleContainerVertical, backgroundColor && {\n            backgroundColor: backgroundColor\n          }, keyboardStyle])\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.flex1, {\n            width\n          }, !isTopPosition ? {\n            paddingTop: extendHeight\n          } : {\n            justifyContent: 'flex-end',\n            paddingBottom: extendHeight\n          }])\n        }, /*#__PURE__*/React.createElement(View, {\n          style: StyleSheet.flatten([styles.container, containerStyle, isFull ? styleHorizontal : styleVertical])\n        }, _renderList(isTopPosition))))));\n      }\n      return null;\n    }\n    return null;\n  }, [visible, search, position, keyboardHeight, maxHeight, minHeight, dropdownPosition, keyboardAvoiding, showOrClose, styleContainerVertical, backgroundColor, containerStyle, styleHorizontal, _renderList]);\n  return /*#__PURE__*/React.createElement(View, {\n    style: StyleSheet.flatten([styles.mainWrap, style]),\n    ref: ref,\n    onLayout: _measure\n  }, _renderDropdown(), _renderModal());\n});\nexport default DropdownComponent;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}